---
title: Image Interface Overview
description: The image() interface for AI image generation.
---

import { Aside } from '@astrojs/starlight/components';

# Image Interface

The `image()` function provides a unified interface for AI image generation, editing, and manipulation.

## Function Signature

```typescript
function image<TParams = unknown>(
  options: ImageOptions<TParams>
): ImageInstance<TParams>;
```

## Options

```typescript
interface ImageOptions<TParams = unknown> {
  /** A model reference from a provider factory */
  model: ModelReference;

  /** Provider infrastructure configuration (optional - uses env vars if omitted) */
  config?: ProviderConfig;

  /** Model-specific parameters (size, quality, style, etc.) */
  params?: TParams;
}
```

## ImageInstance

```typescript
interface ImageInstance<TParams = unknown> {
  /** Generate images from a text prompt */
  generate(input: ImagePrompt): Promise<ImageResult>;

  /** Generate with streaming progress (if supported) */
  stream?(input: ImagePrompt): ImageStreamResult;

  /** Edit an existing image (inpainting) */
  edit?(input: ImageEditInput): Promise<ImageResult>;

  /** Create variations of an existing image */
  vary?(input: ImageVaryInput): Promise<ImageResult>;

  /** Upscale an image to higher resolution */
  upscale?(input: ImageUpscaleInput): Promise<ImageResult>;

  /** The bound model */
  readonly model: BoundImageModel<TParams>;

  /** Current parameters */
  readonly params: TParams | undefined;

  /** Model capabilities */
  readonly capabilities: ImageCapabilities;
}
```

## Basic Usage

```typescript
import { image } from '@providerprotocol/ai';
import { openai } from '@providerprotocol/ai/openai';

const dalle = image({
  model: openai('dall-e-3'),
  config: {
    apiKey: process.env.OPENAI_API_KEY,
  },
  params: {
    size: '1024x1024',
    quality: 'hd',
  },
});

// Simple generation
const result = await dalle.generate('A sunset over mountains, oil painting style');

console.log(result.images.length);           // 1
console.log(result.metadata?.revisedPrompt); // DALL-E's enhanced prompt

// Save the image
const imageData = result.images[0].image.toBytes();
await Bun.write('sunset.png', imageData);
```

## ImagePrompt

```typescript
type ImagePrompt = string | {
  prompt: string;
  negativePrompt?: string;
  referenceImages?: Image[];
  seed?: number;
};
```

## ImageResult

```typescript
interface ImageResult {
  /** Generated images */
  images: GeneratedImage[];

  /** Generation metadata */
  metadata?: {
    seed?: number;
    revisedPrompt?: string;
  };

  /** Usage/billing information */
  usage: ImageUsage;
}

interface GeneratedImage {
  /** The generated image */
  image: Image;

  /** Per-image metadata */
  metadata?: {
    seed?: number;
    index?: number;
    finishReason?: 'success' | 'content_filtered';
  };
}
```

## Capabilities

ImageCapabilities declares what the **provider's API** supports, not individual model capabilities:

```typescript
interface ImageCapabilities {
  generate: boolean;      // Text-to-image
  streaming: boolean;     // Streaming progress
  edit: boolean;          // Inpainting
  vary: boolean;          // Variations
  upscale: boolean;       // Super-resolution
  outpaint: boolean;      // Outpainting
  imageToImage: boolean;  // Image-to-image
  maxImages: number;      // Max images per request
  supportedSizes: string[];
  supportedAspectRatios?: string[];
  supportedFormats: ('png' | 'jpeg' | 'webp')[];
}
```

Check capabilities before using optional features:

```typescript
if (dalle.capabilities.edit && dalle.edit) {
  // Safe to use edit
}

if (dalle.capabilities.streaming && dalle.stream) {
  // Safe to use streaming
}
```

## Supported Providers

| Provider | Models | Capabilities |
|----------|--------|--------------|
| OpenAI | dall-e-3, dall-e-2 | Generate, Edit, Vary |
| Google | imagen-3.0 | Generate |
| Stability | SDXL, SD3 | Generate, Edit, Vary, Upscale |

<Aside type="tip">
Each provider exports its own parameter types. Consult provider documentation for options like size, quality, style presets, and sampling parameters.
</Aside>
