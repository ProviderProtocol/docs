---
title: createProvider()
description: Create a custom provider for UPP.
---

import { Aside, Badge } from '@astrojs/starlight/components';

# createProvider()

<Badge text="UPP-1.1 Compliant" variant="success" />

Creates a custom provider factory for use with UPP modality functions.

<Aside type="note" title="Specification">
  Implements the [UPP-1.1 Provider Protocol](/spec/providers/conformance).
</Aside>

## Import

```typescript
import { createProvider } from '@providerprotocol/ai';
```

## Signature

```typescript
function createProvider<TOptions = unknown>(
  options: CreateProviderOptions<TOptions>
): Provider<TOptions>
```

## CreateProviderOptions

```typescript
interface CreateProviderOptions<TOptions = unknown> {
  /** Provider name (e.g., 'anthropic', 'openai') */
  name: string;

  /** Provider version */
  version: string;

  /** Modality handlers */
  modalities: {
    llm?: LLMHandler;
    embedding?: EmbeddingHandler;
    image?: ImageHandler;
  };
}
```

## Provider Interface

The returned provider is a callable factory:

```typescript
interface Provider<TOptions = unknown> {
  /** Create a model reference */
  (modelId: string, options?: TOptions): ModelReference<TOptions>;

  /** Provider name */
  readonly name: string;

  /** Provider version */
  readonly version: string;

  /** Available modality handlers */
  readonly modalities: {
    llm?: LLMHandler;
    embedding?: EmbeddingHandler;
    image?: ImageHandler;
  };
}
```

## Example: Custom Provider

```typescript
import { createProvider } from '@providerprotocol/ai';

const myProvider = createProvider({
  name: 'my-provider',
  version: '1.0.0',
  modalities: {
    llm: createMyLLMHandler(),
  },
});

// Use it like any other provider
const model = myProvider('my-model-id');
const instance = llm({ model });
```

## LLMHandler

LLM handlers must implement:

```typescript
interface LLMHandler {
  /** Bind a model ID to create a BoundLLMModel */
  bind(modelId: string): BoundLLMModel;
}

interface BoundLLMModel<TParams = unknown> {
  readonly modelId: string;
  readonly capabilities: LLMCapabilities;
  readonly provider: Provider;

  /** Execute a non-streaming request */
  complete(request: LLMRequest<TParams>): Promise<LLMResponse>;

  /** Execute a streaming request */
  stream(request: LLMRequest<TParams>): LLMStreamResult;
}
```

## Built-in Providers

The library includes pre-built providers:

| Provider | Import Path | Modalities |
|----------|-------------|------------|
| Anthropic | `@providerprotocol/ai/anthropic` | LLM |
| OpenAI | `@providerprotocol/ai/openai` | LLM |
| Google | `@providerprotocol/ai/google` | LLM |
| Ollama | `@providerprotocol/ai/ollama` | LLM |

## Related

- [Provider Conformance](/spec/providers/conformance)
- [Provider Guide](/guide/providers)
