---
title: Turn
description: The Turn type representing a complete inference result.
---

import { Aside, Badge } from '@astrojs/starlight/components';

# Turn

A `Turn` represents the complete result of an LLM inference call, containing all messages produced during that inference (including tool execution cycles).

<Aside type="note" title="Specification">
  Implements the [UPP Turn](/spec/llm/interface) specification.
</Aside>

## Import

```typescript
import type { Turn, TokenUsage } from '@providerprotocol/ai';
```

## Turn Interface

```typescript
interface Turn<TData = unknown> {
  /** All messages produced during this inference */
  readonly messages: Message[];

  /** The final assistant response */
  readonly response: AssistantMessage;

  /** Tool executions performed during this inference */
  readonly toolExecutions: ToolExecution[];

  /** Token usage for this turn */
  readonly usage: TokenUsage;

  /** Number of inference cycles (1 + tool execution rounds) */
  readonly cycles: number;

  /** Structured output data (if structure was specified) */
  readonly data?: TData;
}
```

## TokenUsage

```typescript
interface TokenUsage {
  /** Input tokens consumed */
  inputTokens: number;

  /** Output tokens generated */
  outputTokens: number;

  /** Total tokens (input + output) */
  totalTokens: number;

  /** Per-cycle breakdown (for multi-cycle turns) */
  cycles?: Array<{
    inputTokens: number;
    outputTokens: number;
  }>;
}
```

## Usage

```typescript
const turn = await claude.generate('What is 2 + 2?');

// Access the response
console.log(turn.response.text);

// Check token usage
console.log(`Used ${turn.usage.totalTokens} tokens`);

// If tools were called
console.log(`Completed in ${turn.cycles} cycle(s)`);
for (const exec of turn.toolExecutions) {
  console.log(`Tool: ${exec.toolName}, Duration: ${exec.duration}ms`);
}

// Append to history
history.push(...turn.messages);
```

## With Structured Output

```typescript
interface Person {
  name: string;
  age: number;
}

const claude = llm({
  model: anthropic('claude-sonnet-4-20250514'),
  structure: {
    type: 'object',
    properties: {
      name: { type: 'string' },
      age: { type: 'number' },
    },
    required: ['name', 'age'],
  },
});

const turn = await claude.generate('Extract: John is 30');

// Typed data access
const person = turn.data as Person;
console.log(person.name); // 'John'
console.log(person.age);  // 30
```

## Related

- [llm()](/api/core/llm)
- [Messages](/api/types/messages)
- [Thread](/api/types/thread)
- [Tool](/api/types/tool)
