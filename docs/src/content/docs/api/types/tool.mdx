---
title: Tool Types
description: Tool definition and execution types.
---

import { Aside, Badge } from '@astrojs/starlight/components';

# Tool Types

Types for defining tools and handling tool execution.

<Aside type="note" title="Specification">
  Implements the [UPP Tools](/spec/llm/tools) specification.
</Aside>

## Import

```typescript
import type {
  Tool,
  ToolCall,
  ToolResult,
  ToolExecution,
  ToolUseStrategy,
} from '@providerprotocol/ai';
```

## Tool Interface

```typescript
interface Tool<TParams = unknown, TResult = unknown> {
  /** Tool name (unique within an llm() instance) */
  name: string;

  /** Description for the model */
  description: string;

  /** JSON Schema for parameters */
  parameters: JSONSchema;

  /** Execution function */
  run(params: TParams): TResult | Promise<TResult>;

  /** Optional approval handler */
  approval?(params: TParams): boolean | Promise<boolean>;
}
```

## ToolCall

A tool call requested by the model:

```typescript
interface ToolCall {
  /** Unique identifier for this call */
  toolCallId: string;

  /** Name of the tool to call */
  toolName: string;

  /** Arguments for the tool */
  arguments: Record<string, unknown>;
}
```

## ToolResult

Result of a tool execution:

```typescript
interface ToolResult {
  /** Matches the toolCallId from ToolCall */
  toolCallId: string;

  /** The result (or error message) */
  result: unknown;

  /** Whether this is an error result */
  isError?: boolean;
}
```

## ToolExecution

Detailed execution record (in Turn.toolExecutions):

```typescript
interface ToolExecution {
  /** Tool name */
  toolName: string;

  /** Tool call ID */
  toolCallId: string;

  /** Arguments passed to the tool */
  arguments: Record<string, unknown>;

  /** Result (or error message) */
  result: unknown;

  /** Whether execution failed */
  isError: boolean;

  /** Execution duration in milliseconds */
  duration: number;

  /** Whether approval was granted (if approval was required) */
  approved?: boolean;
}
```

## ToolUseStrategy

```typescript
interface ToolUseStrategy {
  /** Maximum iterations (default: 10) */
  maxIterations?: number;

  /** Called when tool call is requested */
  onToolCall?(tool: Tool, params: unknown): void | Promise<void>;

  /** Called before execution (return false to skip) */
  onBeforeCall?(tool: Tool, params: unknown): boolean | Promise<boolean>;

  /** Called after successful execution */
  onAfterCall?(tool: Tool, params: unknown, result: unknown): void | Promise<void>;

  /** Called on execution error */
  onError?(tool: Tool, params: unknown, error: Error): void | Promise<void>;

  /** Called when max iterations reached */
  onMaxIterations?(iterations: number): void | Promise<void>;
}
```

## Example Tool

```typescript
const getWeather: Tool<{ location: string }> = {
  name: 'getWeather',
  description: 'Get current weather for a location',
  parameters: {
    type: 'object',
    properties: {
      location: {
        type: 'string',
        description: 'City name or coordinates',
      },
    },
    required: ['location'],
  },
  async run({ location }) {
    const response = await fetch(`https://api.weather.com/${location}`);
    return await response.json();
  },
};
```

## With Approval

```typescript
const deleteFile: Tool<{ path: string }> = {
  name: 'deleteFile',
  description: 'Delete a file',
  parameters: {
    type: 'object',
    properties: {
      path: { type: 'string' },
    },
    required: ['path'],
  },
  async approval({ path }) {
    return await promptUser(`Delete ${path}?`);
  },
  async run({ path }) {
    await fs.unlink(path);
    return `Deleted ${path}`;
  },
};
```

## Related

- [llm()](/api/core/llm)
- [Turn](/api/types/turn)
- [Tools Specification](/spec/llm/tools)
